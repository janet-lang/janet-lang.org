
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <title>OS Module</title>
    <meta name="description" content="Janet is a functional and imperative programming language. It runs on Windows, Linux, macOS, FreeBSD and *nix.">
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="../css/docpage.css" type="text/css" media="screen" charset="utf-8">
    <link rel="shortcut icon" href="assets/favicon.ico">

    <!-- Open Graph -->
    <meta property="og:description" content="Janet is a functional and imperative programming language. It runs on Windows, Linux, macOS, FreeBSD and *nix." />
    <meta property="og:title" content="OS Module" />
    <meta property="og:type" content="website" />
  </head>
  <body>

    <div id="toc-toggle" class="">
      <div class="bar topbar"></div>
      <div class="bar"></div>
      <div class="bar botbar"></div>
    </div>
    <script charset="utf-8">
      function toggleToc() {
        var toggler = document.getElementById('toc-toggle');
        var wrapper = document.querySelector('.toc');
        wrapper.classList.toggle('toc-hidden');
        toggler.classList.toggle('open');
        if (window.localStorage) {
          window.localStorage.setItem('show-toc', toggler.classList.contains('open'));
        }
      }
      function addTocToggle() {
        var el = document.getElementById('toc-toggle');
        if (!window.localStorage || window.localStorage.getItem('show-toc') === 'true') {
          toggleToc()
        }
        el.addEventListener('click', toggleToc);
      }
      window.addEventListener('DOMContentLoaded', addTocToggle);
    </script>

    

    <div class="twocol">
      <div class="toc toc-hidden">
        <ul>
          <li><span><a href="../index.html">Home</a></span></li><li class="caret"><span><a href="../docs/index.html">Documentation</a></span><ul><li><span><a href="../docs/syntax.html">Syntax and the Parser</a></span></li><li><span><a href="../docs/specials.html">Special Forms</a></span></li><li><span><a href="../docs/numbers.html">Numbers and Arithmetic</a></span></li><li><span><a href="../docs/comparison.html">Comparison Operators</a></span></li><li><span><a href="../docs/bindings.html">Bindings (def and var)</a></span></li><li><span><a href="../docs/flow.html">Flow</a></span></li><li><span><a href="../docs/functions.html">Functions</a></span></li><li><span><a href="../docs/strings.html">Strings, Keywords, and Symbols</a></span></li><li><span><a href="../docs/loop.html">Looping</a></span></li><li><span><a href="../docs/macros.html">Macros</a></span></li><li class="caret"><span><a href="../docs/data_structures/index.html">Data Structures</a></span><ul><li><span><a href="../docs/data_structures/arrays.html">Arrays</a></span></li><li><span><a href="../docs/data_structures/buffers.html">Buffers</a></span></li><li><span><a href="../docs/data_structures/tables.html">Tables</a></span></li><li><span><a href="../docs/data_structures/structs.html">Structs</a></span></li><li><span><a href="../docs/data_structures/tuples.html">Tuples</a></span></li></ul></li><li><span><a href="../docs/destructuring.html">Destructuring</a></span></li><li class="caret"><span><a href="../docs/fibers/index.html">Fibers</a></span><ul><li><span><a href="../docs/fibers/dynamic_bindings.html">Dynamic Bindings</a></span></li><li><span><a href="../docs/fibers/error_handling.html">Errors</a></span></li></ul></li><li><span><a href="../docs/modules.html">Modules</a></span></li><li><span><a href="../docs/object_oriented.html">Object-Oriented Programming</a></span></li><li><span><a href="../docs/peg.html">Parsing Expression Grammars</a></span></li><li><span><a href="../docs/prototypes.html">Prototypes</a></span></li><li><span><a href="../docs/abstract_machine.html">The Janet Abstract Machine</a></span></li><li><span><a href="../docs/threads.html">Multithreading</a></span></li><li><span><a href="../docs/jpm.html">jpm</a></span></li></ul></li><li class="caret"><span><a href="index.html">API</a></span><ul><li><span><a href="array.html">array</a></span></li><li><span><a href="buffer.html">buffer</a></span></li><li><span><a href="debug.html">debug</a></span></li><li><span><a href="fiber.html">fiber</a></span></li><li><span><a href="file.html">file</a></span></li><li><span><a href="int.html">int</a></span></li><li><span><a href="math.html">math</a></span></li><li><span><a href="module.html">module</a></span></li><li><span><a href="net.html">net</a></span></li><li><span class="selected"><a href="os.html">os</a></span></li><li><span><a href="peg.html">peg</a></span></li><li><span><a href="parser.html">parser</a></span></li><li><span><a href="string.html">string</a></span></li><li><span><a href="table.html">table</a></span></li><li><span><a href="thread.html">thread</a></span></li><li><span><a href="tuple.html">tuple</a></span></li><li><span><a href="tarray.html">tarray</a></span></li></ul></li><li class="caret"><span><a href="../capi/index.html">C API</a></span><ul><li><span><a href="../capi/wrapping.html">Wrapping Types</a></span></li><li><span><a href="../capi/embedding.html">Embedding</a></span></li><li><span><a href="../capi/configuration.html">Configuration</a></span></li><li><span><a href="../capi/array.html">Array C API</a></span></li><li><span><a href="../capi/buffer.html">Buffer C API</a></span></li><li><span><a href="../capi/table.html">Table C API</a></span></li><li><span><a href="../capi/fiber.html">Fiber C API</a></span></li><li><span><a href="../capi/memory-model.html">Memory Model</a></span></li><li><span><a href="../capi/writing-c-functions.html">Writing C Functions</a></span></li></ul></li>
        </ul>
      </div>
      <div class="content-wrapper main-content">
        <h4 class="subtitle">Janet 1.9.1-4ae3722 Documentation<br>(Other Versions:
          
          <a href="../../1.8.1/api/os.html">1.8.1</a>
          
          <a href="../../1.7.0/api/os.html">1.7.0</a>
          
          <a href="../../1.6.0/api/os.html">1.6.0</a>
          
          <a href="../../1.5.1/api/os.html">1.5.1</a>
          
          <a href="../../1.5.0/api/os.html">1.5.0</a>
          
          <a href="../../1.4.0/api/os.html">1.4.0</a>
          
          <a href="../../1.3.1/api/os.html">1.3.1</a>
          )</h4>
        <h1 class="subtitle">OS Module</h1>
        <div class="prevnext-bar">
          <span class="prev"><a href="net.html"><span class="prevnext-text">Net Module</span></a></span>

          <span class="next"><a href="peg.html"><span class="prevnext-text">PEG Module</span></a></span>
        </div>
        

<p>The <code class="mendoza-code">os</code> module contains most Operating System specific functionality as well as routines
for interacting with the host OS. There is also some functionality for interacting with the
file system. The functionality in this module can be much reduced by setting the <code class="mendoza-code">JANET_REDUCED_OS</code>
define in <code class="mendoza-code">janetconf.h</code>.
</p>
<h2>Index
</h2>
<p><a href="#os/arch">os/arch</a> <a href="#os/cd">os/cd</a> <a href="#os/chmod">os/chmod</a> <a href="#os/clock">os/clock</a> <a href="#os/cryptorand">os/cryptorand</a> <a href="#os/cwd">os/cwd</a> <a href="#os/date">os/date</a> <a href="#os/dir">os/dir</a> <a href="#os/environ">os/environ</a> <a href="#os/execute">os/execute</a> <a href="#os/exit">os/exit</a> <a href="#os/getenv">os/getenv</a> <a href="#os/link">os/link</a> <a href="#os/lstat">os/lstat</a> <a href="#os/mkdir">os/mkdir</a> <a href="#os/mktime">os/mktime</a> <a href="#os/perm-int">os/perm-int</a> <a href="#os/perm-string">os/perm-string</a> <a href="#os/readlink">os/readlink</a> <a href="#os/realpath">os/realpath</a> <a href="#os/rename">os/rename</a> <a href="#os/rm">os/rm</a> <a href="#os/rmdir">os/rmdir</a> <a href="#os/setenv">os/setenv</a> <a href="#os/shell">os/shell</a> <a href="#os/sleep">os/sleep</a> <a href="#os/stat">os/stat</a> <a href="#os/symlink">os/symlink</a> <a href="#os/time">os/time</a> <a href="#os/touch">os/touch</a> <a href="#os/umask">os/umask</a> <a href="#os/which">os/which</a> </p><hr><div class="binding"><span class="binding-sym" id="os/arch">os/arch</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/arch)

Check the ISA that janet was compiled for. Returns one of:

	:x86
	:x86-64
	:arm
	:aarch64
	:sparc
	:wasm
	:unknown
</pre></div><hr><div class="binding"><span class="binding-sym" id="os/cd">os/cd</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/cd path)

Change current directory to path. Returns nil on success, errors on failure.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/chmod">os/chmod</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/chmod path mode)

Change file permissions, where mode is a permission string as returned by os/perm-string, or an integer as returned by os/perm-int. When mode is an integer, it is interpreted as a Unix permission value, best specified in octal, like 8r666 or 8r400. Windows will not differentiate between user, group, and other permissions, and thus will combine all of these permissions. Returns nil.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/clock">os/clock</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/clock)

Return the number of seconds since some fixed point in time. The clock is guaranteed to be non decreasing in real time.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/cryptorand">os/cryptorand</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/cryptorand n &amp;opt buf)

Get or append n bytes of good quality random data provided by the OS. Returns a new buffer or buf.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/cwd">os/cwd</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/cwd)

Returns the current working directory.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/date">os/date</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/date &amp;opt time local)

Returns the given time as a date struct, or the current time if no time is given. Returns a struct with following key values. Note that all numbers are 0-indexed. Date is given in UTC unless local is truthy, in which case the date is formatted for the local timezone.

	:seconds - number of seconds [0-61]
	:minutes - number of minutes [0-59]
	:hours - number of hours [0-23]
	:month-day - day of month [0-30]
	:month - month of year [0, 11]
	:year - years since year 0 (e.g. 2019)
	:week-day - day of the week [0-6]
	:year-day - day of the year [0-365]
	:dst - If Day Light Savings is in effect</pre></div><hr><div class="binding"><span class="binding-sym" id="os/dir">os/dir</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/dir dir &amp;opt array)

Iterate over files and subdirectories in a directory. Returns an array of paths parts, with only the file name or directory name and no prefix.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/environ">os/environ</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/environ)

Get a copy of the os environment table.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/execute">os/execute</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/execute args &amp;opts flags env)

Execute a program on the system and pass it string arguments. Flags is a keyword that modifies how the program will execute.

	:e - enables passing an environment to the program. Without :e, the current environment is inherited.
	:p - allows searching the current PATH for the binary to execute. Without this flag, binaries must use absolute paths.

env is a table or struct mapping environment variables to values. Returns the exit status of the program.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/exit">os/exit</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/exit &amp;opt x)

Exit from janet with an exit code equal to x. If x is not an integer, the exit with status equal the hash of x.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/getenv">os/getenv</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/getenv variable &amp;opt dflt)

Get the string value of an environment variable.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/link">os/link</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/link oldpath newpath &amp;opt symlink)

Create a link at newpath that points to oldpath and returns nil. Iff symlink is truthy, creates a symlink. Iff symlink is falsey or not provided, creates a hard link. Does not work on Windows.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/lstat">os/lstat</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/lstat path &amp;opt tab|key)

Like os/stat, but don't follow symlinks.
</pre></div><hr><div class="binding"><span class="binding-sym" id="os/mkdir">os/mkdir</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/mkdir path)

Create a new directory. The path will be relative to the current directory if relative, otherwise it will be an absolute path. Returns true if the directory was created, false if the directory already exists, and errors otherwise.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/mktime">os/mktime</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/mktime date-struct &amp;opt local)

Get the broken down date-struct time expressed as the number of seconds since January 1, 1970, the Unix epoch. Returns a real number. Date is given in UTC unless local is truthy, in which case the date is computed for the local timezone.

Inverse function to os/date.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/perm-int">os/perm-int</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/perm-int bytes)

Parse a 9 character permission string and return an integer that can be used by chmod.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/perm-string">os/perm-string</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/perm-string int)

Convert a Unix octal permission value from a permission integer as returned by os/stat to a human readable string, that follows the formatting of unix tools like ls. Returns the string as a 9 character string of r, w, x and - characters. Does not include the file/directory/symlink character as rendered by `ls`.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/readlink">os/readlink</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/readlink path)

Read the contents of a symbolic link. Does not work on Windows.
</pre></div><hr><div class="binding"><span class="binding-sym" id="os/realpath">os/realpath</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/realpath path)

Get the absolute path for a given path, following ../, ./, and symlinks. Returns an absolute path as a string. Will raise an error on Windows.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/rename">os/rename</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/rename oldname newname)

Rename a file on disk to a new path. Returns nil.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/rm">os/rm</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/rm path)

Delete a file. Returns nil.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/rmdir">os/rmdir</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/rmdir path)

Delete a directory. The directory must be empty to succeed.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/setenv">os/setenv</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/setenv variable value)

Set an environment variable.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/shell">os/shell</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/shell str)

Pass a command string str directly to the system shell.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/sleep">os/sleep</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/sleep nsec)

Suspend the program for nsec seconds. 'nsec' can be a real number. Returns nil.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/stat">os/stat</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/stat path &amp;opt tab|key)

Gets information about a file or directory. Returns a table If the third argument is a keyword, returns only that information from stat. If the file or directory does not exist, returns nil. The keys are

	:dev - the device that the file is on
	:mode - the type of file, one of :file, :directory, :block, :character, :fifo, :socket, :link, or :other
	:int-permissions - A Unix permission integer like 8r744
	:permissions - A Unix permission string like "rwxr--r--"
	:uid - File uid
	:gid - File gid
	:nlink - number of links to file
	:rdev - Real device of file. 0 on windows.
	:size - size of file in bytes
	:blocks - number of blocks in file. 0 on windows
	:blocksize - size of blocks in file. 0 on windows
	:accessed - timestamp when file last accessed
	:changed - timestamp when file last changed (permissions changed)
	:modified - timestamp when file last modified (content changed)
</pre></div><hr><div class="binding"><span class="binding-sym" id="os/symlink">os/symlink</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/symlink oldpath newpath)

Create a symlink from oldpath to newpath, returning nil. Same as (os/link oldpath newpath true).</pre></div><hr><div class="binding"><span class="binding-sym" id="os/time">os/time</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/time)

Get the current time expressed as the number of seconds since January 1, 1970, the Unix epoch. Returns a real number.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/touch">os/touch</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/touch path &amp;opt actime modtime)

Update the access time and modification times for a file. By default, sets times to the current time.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/umask">os/umask</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/umask mask)

Set a new umask, returns the old umask.</pre></div><hr><div class="binding"><span class="binding-sym" id="os/which">os/which</span> <span class="binding-type">cfunction</span>  <pre class="binding-text">(os/which)

Check the current operating system. Returns one of:

	:windows
	:macos
	:web - Web assembly (emscripten)
	:linux
	:freebsd
	:openbsd
	:netbsd
	:posix - A POSIX compatible system (default)

May also return a custom keyword specified at build time.</pre></div>
        <div class="prevnext-bar">
          <span class="prev"><a href="net.html"><span class="prevnext-text">Net Module</span></a></span>
          <span class="next"><a href="peg.html"><span class="prevnext-text">PEG Module</span></a></span>
        </div>
      </div>
    </div>

    
<footer>
  &copy; Calvin Rose &amp; contributors 2020
  <div class="gentag">Generated on June 13, 2020 at 19:13:00 (UTC) with Janet 1.9.1-4ae3722</div>
  <div class="see-problem">See a problem? Source
    <a href="https://github.com/janet-lang/janet-lang.org">on GitHub</a></div>
</footer>



  </body>
</html>
