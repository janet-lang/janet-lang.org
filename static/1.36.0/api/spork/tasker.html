
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Task Runner (Batch Job Scheduler)</title>
    <meta name="description" content="Janet is a functional and imperative programming language. It runs on Windows, Linux, macOS, FreeBSD and *nix.">
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="../../css/docpage.css" type="text/css" media="screen" charset="utf-8">
    <link rel="shortcut icon" href="../assets/favicon.ico">

    <!-- Open Graph -->
    <meta property="og:description" content="Janet is a functional and imperative programming language. It runs on Windows, Linux, macOS, FreeBSD and *nix." />
    <meta property="og:title" content="Task Runner (Batch Job Scheduler)" />
    <meta property="og:type" content="website" />
  </head>
  <body>

    <div id="toc-toggle" class="open">
      <div class="bar topbar"></div>
      <div class="bar"></div>
      <div class="bar botbar"></div>
    </div>
    <iframe class="search-bar" src="https://duckduckgo.com/search.html?site=janet-lang.org&prefill=Search janet-lang.org" frameborder="0"></iframe>
    <script charset="utf-8">
      function toggleToc() {
        var toggler = document.getElementById('toc-toggle');
        var wrapper = document.querySelector('.toc');
        wrapper.classList.toggle('toc-hidden');
        toggler.classList.toggle('open');
        if (window.localStorage) {
          window.localStorage.setItem('show-toc', toggler.classList.contains('open'));
        }
      }
      function addTocToggle() {
        var el = document.getElementById('toc-toggle');
        if (!window.localStorage || window.localStorage.getItem('show-toc') === 'true') {
          toggleToc()
        }
        el.addEventListener('click', toggleToc);
      }
      window.addEventListener('DOMContentLoaded', addTocToggle);
    </script>

    

    <div class="twocol">
      <div class="toc show-toc">
        <ul>
          <li><span><a href="../../index.html">Home</a></span></li><li class="caret"><span><a href="../../docs/index.html">Documentation</a></span><ul><li><span><a href="../../docs/syntax.html">Syntax and the Parser</a></span></li><li><span><a href="../../docs/specials.html">Special Forms</a></span></li><li><span><a href="../../docs/numbers.html">Numbers and Arithmetic</a></span></li><li><span><a href="../../docs/comparison.html">Comparison Operators</a></span></li><li><span><a href="../../docs/bindings.html">Bindings (def and var)</a></span></li><li><span><a href="../../docs/flow.html">Flow</a></span></li><li><span><a href="../../docs/functions.html">Functions</a></span></li><li><span><a href="../../docs/strings.html">Strings, Keywords, and Symbols</a></span></li><li><span><a href="../../docs/loop.html">Looping</a></span></li><li><span><a href="../../docs/macros.html">Macros</a></span></li><li class="caret"><span><a href="../../docs/data_structures/index.html">Data Structures</a></span><ul><li><span><a href="../../docs/data_structures/arrays.html">Arrays</a></span></li><li><span><a href="../../docs/data_structures/buffers.html">Buffers</a></span></li><li><span><a href="../../docs/data_structures/tables.html">Tables</a></span></li><li><span><a href="../../docs/data_structures/structs.html">Structs</a></span></li><li><span><a href="../../docs/data_structures/tuples.html">Tuples</a></span></li></ul></li><li><span><a href="../../docs/destructuring.html">Destructuring</a></span></li><li class="caret"><span><a href="../../docs/fibers/index.html">Fibers</a></span><ul><li><span><a href="../../docs/fibers/dynamic_bindings.html">Dynamic Bindings</a></span></li><li><span><a href="../../docs/fibers/error_handling.html">Errors</a></span></li></ul></li><li><span><a href="../../docs/modules.html">Modules</a></span></li><li><span><a href="../../docs/object_oriented.html">Object-Oriented Programming</a></span></li><li><span><a href="../../docs/peg.html">Parsing Expression Grammars</a></span></li><li><span><a href="../../docs/prototypes.html">Prototypes</a></span></li><li><span><a href="../../docs/abstract_machine.html">The Janet Abstract Machine</a></span></li><li><span><a href="../../docs/event_loop.html">The Event Loop</a></span></li><li><span><a href="../../docs/threads.html">Multithreading</a></span></li><li><span><a href="../../docs/networking.html">Networking</a></span></li><li class="caret"><span><a href="../../docs/process_management/index.html">Process Management</a></span><ul><li><span><a href="../../docs/process_management/execute.html">Executing</a></span></li><li><span><a href="../../docs/process_management/spawn.html">Spawning</a></span></li></ul></li><li><span><a href="../../docs/documentation.html">Documentation</a></span></li><li><span><a href="../../docs/jpm.html">jpm</a></span></li><li><span><a href="../../docs/linting.html">Linting</a></span></li><li><span><a href="../../docs/ffi.html">Foreign Function Interface</a></span></li></ul></li><li class="caret"><span><a href="../index.html">API</a></span><ul><li><span><a href="../array.html">array</a></span></li><li><span><a href="../buffer.html">buffer</a></span></li><li><span><a href="../bundle.html">bundle</a></span></li><li><span><a href="../debug.html">debug</a></span></li><li><span><a href="../ev.html">ev</a></span></li><li><span><a href="../ffi.html">ffi</a></span></li><li><span><a href="../fiber.html">fiber</a></span></li><li><span><a href="../file.html">file</a></span></li><li><span><a href="../int.html">int</a></span></li><li class="caret"><span><a href="../jpm/index.html">jpm</a></span><ul><li><span><a href="../jpm/rules.html">rules</a></span></li><li><span><a href="../jpm/cc.html">cc</a></span></li><li><span><a href="../jpm/cgen.html">cgen</a></span></li><li><span><a href="../jpm/cli.html">cli</a></span></li><li><span><a href="../jpm/commands.html">commands</a></span></li><li><span><a href="../jpm/config.html">config</a></span></li><li><span><a href="../jpm/make-config.html">make-config</a></span></li><li><span><a href="../jpm/dagbuild.html">dagbuild</a></span></li><li><span><a href="../jpm/pm.html">pm</a></span></li><li><span><a href="../jpm/scaffold.html">scaffold</a></span></li><li><span><a href="../jpm/shutil.html">shutil</a></span></li></ul></li><li><span><a href="../math.html">math</a></span></li><li><span><a href="../module.html">module</a></span></li><li><span><a href="../net.html">net</a></span></li><li><span><a href="../os.html">os</a></span></li><li><span><a href="../peg.html">peg</a></span></li><li><span><a href="../parser.html">parser</a></span></li><li class="caret"><span><a href="index.html">spork</a></span><ul><li><span><a href="argparse.html">argparse</a></span></li><li><span><a href="base64.html">base64</a></span></li><li><span><a href="cc.html">cc</a></span></li><li><span><a href="cjanet.html">cjanet</a></span></li><li><span><a href="crc.html">crc</a></span></li><li><span><a href="channel.html">channel</a></span></li><li><span><a href="cron.html">cron</a></span></li><li><span><a href="data.html">data</a></span></li><li><span><a href="ev-utils.html">ev-utils</a></span></li><li><span><a href="fmt.html">fmt</a></span></li><li><span><a href="generators.html">generators</a></span></li><li><span><a href="getline.html">getline</a></span></li><li><span><a href="htmlgen.html">htmlgen</a></span></li><li><span><a href="http.html">http</a></span></li><li><span><a href="httpf.html">httpf</a></span></li><li><span><a href="infix.html">infix</a></span></li><li><span><a href="json.html">json</a></span></li><li><span><a href="mdz.html">mdz</a></span></li><li><span><a href="math.html">math</a></span></li><li><span><a href="misc.html">misc</a></span></li><li><span><a href="netrepl.html">netrepl</a></span></li><li><span><a href="pgp.html">pgp</a></span></li><li><span><a href="build-rules.html">build-rules</a></span></li><li><span><a href="path.html">path</a></span></li><li><span><a href="randgen.html">randgen</a></span></li><li><span><a href="rawterm.html">rawterm</a></span></li><li><span><a href="regex.html">regex</a></span></li><li><span><a href="rpc.html">rpc</a></span></li><li><span><a href="schema.html">schema</a></span></li><li><span><a href="sh.html">sh</a></span></li><li><span><a href="msg.html">msg</a></span></li><li><span><a href="stream.html">stream</a></span></li><li><span class="selected"><a href="tasker.html">tasker</a></span></li><li><span><a href="temple.html">temple</a></span></li><li><span><a href="test.html">test</a></span></li><li><span><a href="tarray.html">tarray</a></span></li><li><span><a href="utf8.html">utf8</a></span></li><li><span><a href="zip.html">zip</a></span></li></ul></li><li><span><a href="../string.html">string</a></span></li><li><span><a href="../table.html">table</a></span></li><li><span><a href="../misc.html">misc</a></span></li><li><span><a href="../tuple.html">tuple</a></span></li></ul></li><li class="caret"><span><a href="../../capi/index.html">C API</a></span><ul><li><span><a href="../../capi/wrapping.html">Wrapping Types</a></span></li><li><span><a href="../../capi/embedding.html">Embedding</a></span></li><li><span><a href="../../capi/configuration.html">Configuration</a></span></li><li><span><a href="../../capi/array.html">Array C API</a></span></li><li><span><a href="../../capi/buffer.html">Buffer C API</a></span></li><li><span><a href="../../capi/table.html">Table C API</a></span></li><li><span><a href="../../capi/fiber.html">Fiber C API</a></span></li><li><span><a href="../../capi/memory-model.html">Memory Model</a></span></li><li><span><a href="../../capi/writing-c-functions.html">Writing C Functions</a></span></li></ul></li>
        </ul>
      </div>
      <div class="content-wrapper main-content">
        <h4 class="subtitle">Janet 1.36.0-c0d7a49 Documentation<br>(Other Versions:
          
          <a href="../../../1.35.0/api/spork/tasker.html">1.35.0</a>
          
          <a href="../../../1.34.0/api/spork/tasker.html">1.34.0</a>
          
          <a href="../../../1.31.0/api/spork/tasker.html">1.31.0</a>
          
          <a href="../../../1.29.1/api/spork/tasker.html">1.29.1</a>
          
          <a href="../../../1.28.0/api/spork/tasker.html">1.28.0</a>
          
          <a href="../../../1.27.0/api/spork/tasker.html">1.27.0</a>
          
          <a href="../../../1.26.0/api/spork/tasker.html">1.26.0</a>
          
          <a href="../../../1.25.1/api/spork/tasker.html">1.25.1</a>
          
          <a href="../../../1.24.0/api/spork/tasker.html">1.24.0</a>
          
          <a href="../../../1.23.0/api/spork/tasker.html">1.23.0</a>
          
          <a href="../../../1.22.0/api/spork/tasker.html">1.22.0</a>
          
          <a href="../../../1.21.0/api/spork/tasker.html">1.21.0</a>
          
          <a href="../../../1.20.0/api/spork/tasker.html">1.20.0</a>
          
          <a href="../../../1.19.0/api/spork/tasker.html">1.19.0</a>
          
          <a href="../../../1.18.1/api/spork/tasker.html">1.18.1</a>
          
          <a href="../../../1.17.1/api/spork/tasker.html">1.17.1</a>
          
          <a href="../../../1.16.1/api/spork/tasker.html">1.16.1</a>
          
          <a href="../../../1.15.0/api/spork/tasker.html">1.15.0</a>
          
          <a href="../../../1.13.1/api/spork/tasker.html">1.13.1</a>
          
          <a href="../../../1.12.2/api/spork/tasker.html">1.12.2</a>
          
          <a href="../../../1.11.1/api/spork/tasker.html">1.11.1</a>
          
          <a href="../../../1.10.1/api/spork/tasker.html">1.10.1</a>
          
          <a href="../../../1.9.1/api/spork/tasker.html">1.9.1</a>
          
          <a href="../../../1.8.1/api/spork/tasker.html">1.8.1</a>
          
          <a href="../../../1.7.0/api/spork/tasker.html">1.7.0</a>
          
          <a href="../../../1.6.0/api/spork/tasker.html">1.6.0</a>
          
          <a href="../../../1.5.1/api/spork/tasker.html">1.5.1</a>
          
          <a href="../../../1.5.0/api/spork/tasker.html">1.5.0</a>
          
          <a href="../../../1.4.0/api/spork/tasker.html">1.4.0</a>
          
          <a href="../../../1.3.1/api/spork/tasker.html">1.3.1</a>
          )</h4>
        <h1 class="subtitle">Task Runner (Batch Job Scheduler)</h1>
        <div class="prevnext-bar">
          <span class="prev"><a href="stream.html"><span class="prevnext-text">Stream Utilities</span></a></span>

          <span class="next"><a href="temple.html"><span class="prevnext-text">Temple Templates</span></a></span>
        </div>
        

<h2 id="Index-62">Index
</h2>
<p><a href="#tasker/all-tasks">tasker/all-tasks</a> <a href="#tasker/cancel-task">tasker/cancel-task</a> <a href="#tasker/close-queues">tasker/close-queues</a> <a href="#tasker/default-expiration">tasker/default-expiration</a> <a href="#tasker/default-priority">tasker/default-priority</a> <a href="#tasker/default-task-directory">tasker/default-task-directory</a> <a href="#tasker/err-file-name">tasker/err-file-name</a> <a href="#tasker/max-priority">tasker/max-priority</a> <a href="#tasker/min-priority">tasker/min-priority</a> <a href="#tasker/new-tasker">tasker/new-tasker</a> <a href="#tasker/out-file-name">tasker/out-file-name</a> <a href="#tasker/queue-task">tasker/queue-task</a> <a href="#tasker/run-cleanup">tasker/run-cleanup</a> <a href="#tasker/run-executors">tasker/run-executors</a> <a href="#tasker/spawn-executors">tasker/spawn-executors</a> <a href="#tasker/statuses">tasker/statuses</a> <a href="#tasker/task-file">tasker/task-file</a> <a href="#tasker/task-meta-name">tasker/task-meta-name</a> <a href="#tasker/task-status">tasker/task-status</a> </p><hr><div class="binding"><span id="tasker/all-tasks" class="binding-sym">tasker/all-tasks</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/tasker/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/tasker.janet#L271">source</a></span> <pre class="binding-text">(all-tasks tasker &amp;opt detailed)

Get an array of all task ids for which there is still data on disk. If `detailed` is truthy, return full task metadata instead of ids.</pre></div><hr><div class="binding"><span id="tasker/cancel-task" class="binding-sym">tasker/cancel-task</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/tasker/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/tasker.janet#L278">source</a></span> <pre class="binding-text">(cancel-task tasker task-id)

Cancel a queued or running task.</pre></div><hr><div class="binding"><span id="tasker/close-queues" class="binding-sym">tasker/close-queues</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/tasker/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/tasker.janet#L252">source</a></span> <pre class="binding-text">(close-queues tasker)

Prevent any tasks from being added to queues. When an executor finishes its current job, if there are any, it will terminate. When all executors complete, the call to `run-executors` will complete.</pre></div><hr><div class="binding"><span id="tasker/default-expiration" class="binding-sym">tasker/default-expiration</span> <span class="binding-type">number</span> <span class="binding-type"><a href="https://github.com/janet-lang/tasker/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/tasker.janet#L19">source</a></span> <pre class="binding-text">Default expiration time (1 day)</pre></div><hr><div class="binding"><span id="tasker/default-priority" class="binding-sym">tasker/default-priority</span> <span class="binding-type">number</span> <span class="binding-type"><a href="https://github.com/janet-lang/tasker/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/tasker.janet#L18">source</a></span> <pre class="binding-text">Default task priority</pre></div><hr><div class="binding"><span id="tasker/default-task-directory" class="binding-sym">tasker/default-task-directory</span> <span class="binding-type">string</span> <span class="binding-type"><a href="https://github.com/janet-lang/tasker/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/tasker.janet#L20">source</a></span> <pre class="binding-text">Default location of task records</pre></div><hr><div class="binding"><span id="tasker/err-file-name" class="binding-sym">tasker/err-file-name</span> <span class="binding-type">string</span> <span class="binding-type"><a href="https://github.com/janet-lang/tasker/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/tasker.janet#L14">source</a></span> <pre class="binding-text">Name of the file for logging errors</pre></div><hr><div class="binding"><span id="tasker/max-priority" class="binding-sym">tasker/max-priority</span> <span class="binding-type">number</span> <span class="binding-type"><a href="https://github.com/janet-lang/tasker/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/tasker.janet#L17">source</a></span> <pre class="binding-text">Maximum allowed priority (lower priority tasks will execute first)</pre></div><hr><div class="binding"><span id="tasker/min-priority" class="binding-sym">tasker/min-priority</span> <span class="binding-type">number</span> <span class="binding-type"><a href="https://github.com/janet-lang/tasker/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/tasker.janet#L16">source</a></span> <pre class="binding-text">Minimum allowed priority (lower priority tasks will execute first)</pre></div><hr><div class="binding"><span id="tasker/new-tasker" class="binding-sym">tasker/new-tasker</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/tasker/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/tasker.janet#L150">source</a></span> <pre class="binding-text">(new-tasker &amp;opt task-directory queues queue-size)

Create queues and various settings to run tasks. Create a new tasker table.</pre></div><hr><div class="binding"><span id="tasker/out-file-name" class="binding-sym">tasker/out-file-name</span> <span class="binding-type">string</span> <span class="binding-type"><a href="https://github.com/janet-lang/tasker/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/tasker.janet#L13">source</a></span> <pre class="binding-text">Name of the file for general logging</pre></div><hr><div class="binding"><span id="tasker/queue-task" class="binding-sym">tasker/queue-task</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/tasker/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/tasker.janet#L171">source</a></span> <pre class="binding-text">(queue-task tasker argv &amp;opt note priority qname timeout expiration input)

Add a task specification to a queue. Supply an argv string array that will be used to invoke a subprocess. The optional `note` parameter is just a textual note for task tracking. The `priority` parameter should be an integer between 0 and 9 inclusive, default is 4. Lower priority jobs in the same queue will be executed by higher priority. Use input to pass in generic, unstructured input to a task.</pre></div><hr><div class="binding"><span id="tasker/run-cleanup" class="binding-sym">tasker/run-cleanup</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/tasker/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/tasker.janet#L289">source</a></span> <pre class="binding-text">(run-cleanup tasker)

Delete old expired jobs saved on disk</pre></div><hr><div class="binding"><span id="tasker/run-executors" class="binding-sym">tasker/run-executors</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/tasker/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/tasker.janet#L245">source</a></span> <pre class="binding-text">(run-executors tasker &amp;opt workers-per-queue pre-task post-task)

Start a number of executors to run tasks as with `tasker/spawn-executors`, and then wait for all executors to complete.</pre></div><hr><div class="binding"><span id="tasker/spawn-executors" class="binding-sym">tasker/spawn-executors</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/tasker/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/tasker.janet#L206">source</a></span> <pre class="binding-text">(spawn-executors tasker &amp;opt qnames workers-per-queue pre-task post-task)

Start a number of executors to run tasks. Tasks can be added to a queue by calling queue-task. A single tasker object can make multiple calls to spawn-executors.</pre></div><hr><div class="binding"><span id="tasker/statuses" class="binding-sym">tasker/statuses</span> <span class="binding-type">tuple</span> <span class="binding-type"><a href="https://github.com/janet-lang/tasker/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/tasker.janet#L26">source</a></span> <pre class="binding-text">A tuple of all possible statuses that a task can have.</pre></div><hr><div class="binding"><span id="tasker/task-file" class="binding-sym">tasker/task-file</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/tasker/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/tasker.janet#L260">source</a></span> <pre class="binding-text">(task-file tasker task-id &amp;opt file-name)

Get a log file for a path. By default, will get a path to out.log.</pre></div><hr><div class="binding"><span id="tasker/task-meta-name" class="binding-sym">tasker/task-meta-name</span> <span class="binding-type">string</span> <span class="binding-type"><a href="https://github.com/janet-lang/tasker/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/tasker.janet#L12">source</a></span> <pre class="binding-text">Name of the task metadata file</pre></div><hr><div class="binding"><span id="tasker/task-status" class="binding-sym">tasker/task-status</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/tasker/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/tasker.janet#L266">source</a></span> <pre class="binding-text">(task-status tasker task-id)

Look up the status of a given task by id.</pre></div>
        <div class="prevnext-bar">
          <span class="prev"><a href="stream.html"><span class="prevnext-text">Stream Utilities</span></a></span>
          <span class="next"><a href="temple.html"><span class="prevnext-text">Temple Templates</span></a></span>
        </div>
      </div>
    </div>

    
<footer>
  &copy; Calvin Rose &amp; contributors 2024
  <div class="gentag">Generated on September 8, 2024 at 01:51:37 (UTC) with Janet 1.36.0-c0d7a49</div>
  <div class="see-problem">See a problem? Source
    <a href="https://github.com/janet-lang/janet-lang.org">on GitHub</a></div>
</footer>



  </body>
</html>
