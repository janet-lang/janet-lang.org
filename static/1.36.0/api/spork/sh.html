
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Shell Utilities</title>
    <meta name="description" content="Janet is a functional and imperative programming language. It runs on Windows, Linux, macOS, FreeBSD and *nix.">
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="../../css/docpage.css" type="text/css" media="screen" charset="utf-8">
    <link rel="shortcut icon" href="../assets/favicon.ico">

    <!-- Open Graph -->
    <meta property="og:description" content="Janet is a functional and imperative programming language. It runs on Windows, Linux, macOS, FreeBSD and *nix." />
    <meta property="og:title" content="Shell Utilities" />
    <meta property="og:type" content="website" />
  </head>
  <body>

    <div id="toc-toggle" class="open">
      <div class="bar topbar"></div>
      <div class="bar"></div>
      <div class="bar botbar"></div>
    </div>
    <iframe class="search-bar" src="https://duckduckgo.com/search.html?site=janet-lang.org&prefill=Search janet-lang.org" frameborder="0"></iframe>
    <script charset="utf-8">
      function toggleToc() {
        var toggler = document.getElementById('toc-toggle');
        var wrapper = document.querySelector('.toc');
        wrapper.classList.toggle('toc-hidden');
        toggler.classList.toggle('open');
        if (window.localStorage) {
          window.localStorage.setItem('show-toc', toggler.classList.contains('open'));
        }
      }
      function addTocToggle() {
        var el = document.getElementById('toc-toggle');
        if (!window.localStorage || window.localStorage.getItem('show-toc') === 'true') {
          toggleToc()
        }
        el.addEventListener('click', toggleToc);
      }
      window.addEventListener('DOMContentLoaded', addTocToggle);
    </script>

    

    <div class="twocol">
      <div class="toc show-toc">
        <ul>
          <li><span><a href="../../index.html">Home</a></span></li><li class="caret"><span><a href="../../docs/index.html">Documentation</a></span><ul><li><span><a href="../../docs/syntax.html">Syntax and the Parser</a></span></li><li><span><a href="../../docs/specials.html">Special Forms</a></span></li><li><span><a href="../../docs/numbers.html">Numbers and Arithmetic</a></span></li><li><span><a href="../../docs/comparison.html">Comparison Operators</a></span></li><li><span><a href="../../docs/bindings.html">Bindings (def and var)</a></span></li><li><span><a href="../../docs/flow.html">Flow</a></span></li><li><span><a href="../../docs/functions.html">Functions</a></span></li><li><span><a href="../../docs/strings.html">Strings, Keywords, and Symbols</a></span></li><li><span><a href="../../docs/loop.html">Looping</a></span></li><li><span><a href="../../docs/macros.html">Macros</a></span></li><li class="caret"><span><a href="../../docs/data_structures/index.html">Data Structures</a></span><ul><li><span><a href="../../docs/data_structures/arrays.html">Arrays</a></span></li><li><span><a href="../../docs/data_structures/buffers.html">Buffers</a></span></li><li><span><a href="../../docs/data_structures/tables.html">Tables</a></span></li><li><span><a href="../../docs/data_structures/structs.html">Structs</a></span></li><li><span><a href="../../docs/data_structures/tuples.html">Tuples</a></span></li></ul></li><li><span><a href="../../docs/destructuring.html">Destructuring</a></span></li><li class="caret"><span><a href="../../docs/fibers/index.html">Fibers</a></span><ul><li><span><a href="../../docs/fibers/dynamic_bindings.html">Dynamic Bindings</a></span></li><li><span><a href="../../docs/fibers/error_handling.html">Errors</a></span></li></ul></li><li><span><a href="../../docs/modules.html">Modules</a></span></li><li><span><a href="../../docs/object_oriented.html">Object-Oriented Programming</a></span></li><li><span><a href="../../docs/peg.html">Parsing Expression Grammars</a></span></li><li><span><a href="../../docs/prototypes.html">Prototypes</a></span></li><li><span><a href="../../docs/abstract_machine.html">The Janet Abstract Machine</a></span></li><li><span><a href="../../docs/event_loop.html">The Event Loop</a></span></li><li><span><a href="../../docs/threads.html">Multithreading</a></span></li><li><span><a href="../../docs/networking.html">Networking</a></span></li><li class="caret"><span><a href="../../docs/process_management/index.html">Process Management</a></span><ul><li><span><a href="../../docs/process_management/execute.html">Executing</a></span></li><li><span><a href="../../docs/process_management/spawn.html">Spawning</a></span></li></ul></li><li><span><a href="../../docs/documentation.html">Documentation</a></span></li><li><span><a href="../../docs/jpm.html">jpm</a></span></li><li><span><a href="../../docs/linting.html">Linting</a></span></li><li><span><a href="../../docs/ffi.html">Foreign Function Interface</a></span></li></ul></li><li class="caret"><span><a href="../index.html">API</a></span><ul><li><span><a href="../array.html">array</a></span></li><li><span><a href="../buffer.html">buffer</a></span></li><li><span><a href="../bundle.html">bundle</a></span></li><li><span><a href="../debug.html">debug</a></span></li><li><span><a href="../ev.html">ev</a></span></li><li><span><a href="../ffi.html">ffi</a></span></li><li><span><a href="../fiber.html">fiber</a></span></li><li><span><a href="../file.html">file</a></span></li><li><span><a href="../int.html">int</a></span></li><li class="caret"><span><a href="../jpm/index.html">jpm</a></span><ul><li><span><a href="../jpm/rules.html">rules</a></span></li><li><span><a href="../jpm/cc.html">cc</a></span></li><li><span><a href="../jpm/cgen.html">cgen</a></span></li><li><span><a href="../jpm/cli.html">cli</a></span></li><li><span><a href="../jpm/commands.html">commands</a></span></li><li><span><a href="../jpm/config.html">config</a></span></li><li><span><a href="../jpm/make-config.html">make-config</a></span></li><li><span><a href="../jpm/dagbuild.html">dagbuild</a></span></li><li><span><a href="../jpm/pm.html">pm</a></span></li><li><span><a href="../jpm/scaffold.html">scaffold</a></span></li><li><span><a href="../jpm/shutil.html">shutil</a></span></li></ul></li><li><span><a href="../math.html">math</a></span></li><li><span><a href="../module.html">module</a></span></li><li><span><a href="../net.html">net</a></span></li><li><span><a href="../os.html">os</a></span></li><li><span><a href="../peg.html">peg</a></span></li><li><span><a href="../parser.html">parser</a></span></li><li class="caret"><span><a href="index.html">spork</a></span><ul><li><span><a href="argparse.html">argparse</a></span></li><li><span><a href="base64.html">base64</a></span></li><li><span><a href="cc.html">cc</a></span></li><li><span><a href="cjanet.html">cjanet</a></span></li><li><span><a href="crc.html">crc</a></span></li><li><span><a href="channel.html">channel</a></span></li><li><span><a href="cron.html">cron</a></span></li><li><span><a href="data.html">data</a></span></li><li><span><a href="ev-utils.html">ev-utils</a></span></li><li><span><a href="fmt.html">fmt</a></span></li><li><span><a href="generators.html">generators</a></span></li><li><span><a href="getline.html">getline</a></span></li><li><span><a href="htmlgen.html">htmlgen</a></span></li><li><span><a href="http.html">http</a></span></li><li><span><a href="httpf.html">httpf</a></span></li><li><span><a href="infix.html">infix</a></span></li><li><span><a href="json.html">json</a></span></li><li><span><a href="mdz.html">mdz</a></span></li><li><span><a href="math.html">math</a></span></li><li><span><a href="misc.html">misc</a></span></li><li><span><a href="netrepl.html">netrepl</a></span></li><li><span><a href="pgp.html">pgp</a></span></li><li><span><a href="build-rules.html">build-rules</a></span></li><li><span><a href="path.html">path</a></span></li><li><span><a href="randgen.html">randgen</a></span></li><li><span><a href="rawterm.html">rawterm</a></span></li><li><span><a href="regex.html">regex</a></span></li><li><span><a href="rpc.html">rpc</a></span></li><li><span><a href="schema.html">schema</a></span></li><li><span class="selected"><a href="sh.html">sh</a></span></li><li><span><a href="msg.html">msg</a></span></li><li><span><a href="stream.html">stream</a></span></li><li><span><a href="tasker.html">tasker</a></span></li><li><span><a href="temple.html">temple</a></span></li><li><span><a href="test.html">test</a></span></li><li><span><a href="tarray.html">tarray</a></span></li><li><span><a href="utf8.html">utf8</a></span></li><li><span><a href="zip.html">zip</a></span></li></ul></li><li><span><a href="../string.html">string</a></span></li><li><span><a href="../table.html">table</a></span></li><li><span><a href="../misc.html">misc</a></span></li><li><span><a href="../tuple.html">tuple</a></span></li></ul></li><li class="caret"><span><a href="../../capi/index.html">C API</a></span><ul><li><span><a href="../../capi/wrapping.html">Wrapping Types</a></span></li><li><span><a href="../../capi/embedding.html">Embedding</a></span></li><li><span><a href="../../capi/configuration.html">Configuration</a></span></li><li><span><a href="../../capi/array.html">Array C API</a></span></li><li><span><a href="../../capi/buffer.html">Buffer C API</a></span></li><li><span><a href="../../capi/table.html">Table C API</a></span></li><li><span><a href="../../capi/fiber.html">Fiber C API</a></span></li><li><span><a href="../../capi/memory-model.html">Memory Model</a></span></li><li><span><a href="../../capi/writing-c-functions.html">Writing C Functions</a></span></li></ul></li>
        </ul>
      </div>
      <div class="content-wrapper main-content">
        <h4 class="subtitle">Janet 1.36.0-c0d7a49 Documentation<br>(Other Versions:
          
          <a href="../../../1.35.0/api/spork/sh.html">1.35.0</a>
          
          <a href="../../../1.34.0/api/spork/sh.html">1.34.0</a>
          
          <a href="../../../1.31.0/api/spork/sh.html">1.31.0</a>
          
          <a href="../../../1.29.1/api/spork/sh.html">1.29.1</a>
          
          <a href="../../../1.28.0/api/spork/sh.html">1.28.0</a>
          
          <a href="../../../1.27.0/api/spork/sh.html">1.27.0</a>
          
          <a href="../../../1.26.0/api/spork/sh.html">1.26.0</a>
          
          <a href="../../../1.25.1/api/spork/sh.html">1.25.1</a>
          
          <a href="../../../1.24.0/api/spork/sh.html">1.24.0</a>
          
          <a href="../../../1.23.0/api/spork/sh.html">1.23.0</a>
          
          <a href="../../../1.22.0/api/spork/sh.html">1.22.0</a>
          
          <a href="../../../1.21.0/api/spork/sh.html">1.21.0</a>
          
          <a href="../../../1.20.0/api/spork/sh.html">1.20.0</a>
          
          <a href="../../../1.19.0/api/spork/sh.html">1.19.0</a>
          
          <a href="../../../1.18.1/api/spork/sh.html">1.18.1</a>
          
          <a href="../../../1.17.1/api/spork/sh.html">1.17.1</a>
          
          <a href="../../../1.16.1/api/spork/sh.html">1.16.1</a>
          
          <a href="../../../1.15.0/api/spork/sh.html">1.15.0</a>
          
          <a href="../../../1.13.1/api/spork/sh.html">1.13.1</a>
          
          <a href="../../../1.12.2/api/spork/sh.html">1.12.2</a>
          
          <a href="../../../1.11.1/api/spork/sh.html">1.11.1</a>
          
          <a href="../../../1.10.1/api/spork/sh.html">1.10.1</a>
          
          <a href="../../../1.9.1/api/spork/sh.html">1.9.1</a>
          
          <a href="../../../1.8.1/api/spork/sh.html">1.8.1</a>
          
          <a href="../../../1.7.0/api/spork/sh.html">1.7.0</a>
          
          <a href="../../../1.6.0/api/spork/sh.html">1.6.0</a>
          
          <a href="../../../1.5.1/api/spork/sh.html">1.5.1</a>
          
          <a href="../../../1.5.0/api/spork/sh.html">1.5.0</a>
          
          <a href="../../../1.4.0/api/spork/sh.html">1.4.0</a>
          
          <a href="../../../1.3.1/api/spork/sh.html">1.3.1</a>
          )</h4>
        <h1 class="subtitle">Shell Utilities</h1>
        <div class="prevnext-bar">
          <span class="prev"><a href="schema.html"><span class="prevnext-text">Schema</span></a></span>

          <span class="next"><a href="msg.html"><span class="prevnext-text">Simple Messaging Protocol</span></a></span>
        </div>
        

<h2 id="Index-59">Index
</h2>
<p><a href="#sh/copy">sh/copy</a> <a href="#sh/copy-file">sh/copy-file</a> <a href="#sh/create-dirs">sh/create-dirs</a> <a href="#sh/devnull">sh/devnull</a> <a href="#sh/escape">sh/escape</a> <a href="#sh/exec">sh/exec</a> <a href="#sh/exec-fail">sh/exec-fail</a> <a href="#sh/exec-slurp">sh/exec-slurp</a> <a href="#sh/exec-slurp-all">sh/exec-slurp-all</a> <a href="#sh/exists?">sh/exists?</a> <a href="#sh/list-all-files">sh/list-all-files</a> <a href="#sh/make-new-file">sh/make-new-file</a> <a href="#sh/rm">sh/rm</a> <a href="#sh/scan-directory">sh/scan-directory</a> <a href="#sh/split">sh/split</a> </p><hr><div class="binding"><span id="sh/copy" class="binding-sym">sh/copy</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/spork/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/sh.janet#L135">source</a></span> <pre class="binding-text">(copy src dest)

Copy a file or directory recursively from one location to another.
Expects input to be unix style paths</pre></div><hr><div class="binding"><span id="sh/copy-file" class="binding-sym">sh/copy-file</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/spork/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/sh.janet#L123">source</a></span> <pre class="binding-text">(copy-file src-path dst-path)

Copy a file from source to destination. Creates all directories in the path to the destination file if they do not exist.</pre></div><hr><div class="binding"><span id="sh/create-dirs" class="binding-sym">sh/create-dirs</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/spork/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/sh.janet#L102">source</a></span> <pre class="binding-text">(create-dirs dir-path)

Create all directories in path specified as string including itself.</pre></div><hr><div class="binding"><span id="sh/devnull" class="binding-sym">sh/devnull</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/spork/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/sh.janet#L8">source</a></span> <pre class="binding-text">(devnull)

get the /dev/null equivalent of the current platform as an open file</pre></div><hr><div class="binding"><span id="sh/escape" class="binding-sym">sh/escape</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/spork/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/sh.janet#L170">source</a></span> <pre class="binding-text">(escape &amp; args)

Output a string with all arguments correctly quoted</pre></div><hr><div class="binding"><span id="sh/exec" class="binding-sym">sh/exec</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/spork/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/sh.janet#L13">source</a></span> <pre class="binding-text">(exec &amp; args)

Execute command specified by args returning its exit code</pre></div><hr><div class="binding"><span id="sh/exec-fail" class="binding-sym">sh/exec-fail</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/spork/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/sh.janet#L18">source</a></span> <pre class="binding-text">(exec-fail &amp; args)

Execute command specified by args, fails when command exits with non-zero exit code</pre></div><hr><div class="binding"><span id="sh/exec-slurp" class="binding-sym">sh/exec-slurp</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/spork/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/sh.janet#L23">source</a></span> <pre class="binding-text">(exec-slurp &amp; args)

It executes args with `os/spawn` and throws an error if the process returns with non-zero exit code. If the process
exits with zero exit code, this function trims standard output of the process and returns it. Before the function
finishes, the spawned process is closed for resource control.</pre></div><hr><div class="binding"><span id="sh/exec-slurp-all" class="binding-sym">sh/exec-slurp-all</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/spork/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/sh.janet#L37">source</a></span> <pre class="binding-text">(exec-slurp-all &amp; args)

It executes args with `os/spawn` and returns a struct which has the following keys.

* `:out` - trimmed standard output of the process
* `:err` - trimmed standard error of the process
* `:status` - the exit code of the process

Before the function finishes, the spawned process is closed for resource control.</pre></div><hr><div class="binding"><span id="sh/exists?" class="binding-sym">sh/exists?</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/spork/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/sh.janet#L71">source</a></span> <pre class="binding-text">(exists? path)

Check if the given file or directory exists. (Follows symlinks)</pre></div><hr><div class="binding"><span id="sh/list-all-files" class="binding-sym">sh/list-all-files</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/spork/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/sh.janet#L89">source</a></span> <pre class="binding-text">(list-all-files dir &amp;opt into)

List the files in the given directory recursively. Return the paths to all files found, relative to the current working directory if the given path is a relative path, or as an absolute path otherwise.</pre></div><hr><div class="binding"><span id="sh/make-new-file" class="binding-sym">sh/make-new-file</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/spork/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/sh.janet#L112">source</a></span> <pre class="binding-text">(make-new-file file-path &amp;opt mode)

Create and open a file, creating all the directories leading to the file if they do not exist, and return it. By default, open as a writable file (mode is `:w`).</pre></div><hr><div class="binding"><span id="sh/rm" class="binding-sym">sh/rm</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/spork/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/sh.janet#L59">source</a></span> <pre class="binding-text">(rm path)

Remove a directory and all sub directories recursively.</pre></div><hr><div class="binding"><span id="sh/scan-directory" class="binding-sym">sh/scan-directory</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/spork/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/sh.janet#L76">source</a></span> <pre class="binding-text">(scan-directory dir func)

Scan a directory recursively, applying the given function on all files and directories in a depth-first manner. This function has no effect if the directory does not exist.</pre></div><hr><div class="binding"><span id="sh/split" class="binding-sym">sh/split</span> <span class="binding-type">function</span> <span class="binding-type"><a href="https://github.com/janet-lang/spork/blob/09ad64873b75c386f3abfd1e41d44b990d67487f//spork/sh.janet#L160">source</a></span> <pre class="binding-text">(split s)

Split a string into 'sh like' tokens, returns nil if unable to parse the string.</pre></div>
        <div class="prevnext-bar">
          <span class="prev"><a href="schema.html"><span class="prevnext-text">Schema</span></a></span>
          <span class="next"><a href="msg.html"><span class="prevnext-text">Simple Messaging Protocol</span></a></span>
        </div>
      </div>
    </div>

    
<footer>
  &copy; Calvin Rose &amp; contributors 2024
  <div class="gentag">Generated on September 8, 2024 at 01:51:37 (UTC) with Janet 1.36.0-c0d7a49</div>
  <div class="see-problem">See a problem? Source
    <a href="https://github.com/janet-lang/janet-lang.org">on GitHub</a></div>
</footer>



  </body>
</html>
